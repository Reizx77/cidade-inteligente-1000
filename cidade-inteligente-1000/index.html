<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cidade Inteligente 1000 â€” Painel SP</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span id="apiStatus" class="api-status pillstat">â³ verificando API...</span>
      <span class="dot"></span>
      <h1>Cidade Inteligente 1000 â€” SP</h1>
    </div>
    <nav class="menu">
      <a href="#desafio">Desafio (GranDSI-BR)</a>
      <a href="#painel">Painel</a>
      <a href="#mapa">Mapa</a>
      <a href="#participacao">ParticipaÃ§Ã£o</a>
      <a href="#historico">HistÃ³rico</a>      <a href="historico.html">HistÃ³rico (PÃ¡gina Completa)</a>
    </nav>
  </header>

  <main>
    <section id="painel" class="card-grid">
      <article class="card">
        <h3>Ar: PM2.5 por estaÃ§Ã£o (Âµg/mÂ³) <span class="info" title="PartÃ­culas finas com alto impacto respiratÃ³rio; quanto menor, melhor.">â„¹ï¸</span></h3>
        <p class="sub">Fonte: OpenAQ â€” dados simulados por regiÃ£o</p>
        <canvas id="pm25PorEstacao"></canvas>
      </article>

      <article class="card">
        <h3>Ar: PM10 por estaÃ§Ã£o (Âµg/mÂ³) <span class="info" title="PartÃ­culas inalÃ¡veis maiores (poeira/fumaÃ§a); quanto menor, melhor.">â„¹ï¸</span></h3>
        <p class="sub">Fonte: OpenAQ â€” dados simulados por regiÃ£o</p>
        <canvas id="pm10PorEstacao"></canvas>
      </article>

      <article class="card wide">
        <h3>Clima atual <span class="info" title="Temperatura, sensaÃ§Ã£o, umidade e vento influenciam dispersÃ£o de poluentes.">â„¹ï¸</span></h3>
        <p class="sub">Fonte: Openâ€‘Meteo</p>
        <div id="climaAtual" class="clima">
          <div class="pill">Temperatura: <strong id="temp">--</strong></div>
          <div class="pill">SensaÃ§Ã£o: <strong id="sensacao">--</strong></div>
          <div class="pill">Umidade: <strong id="umidade">--</strong></div>
          <div class="pill">Vento: <strong id="vento">--</strong></div>
        </div>
      </article>

      <article class="card wide">
        <h3>Portal de TransparÃªncia (simulado)</h3>
        <div class="tabela">
          <div class="thead">
            <span>Projeto</span><span>Ã“rgÃ£o</span><span>OrÃ§amento (R$)</span><span>Status</span>
          </div>
          <div class="trow"><span>Corredor de Ã”nibus Verde</span><span>Mobilidade</span><span>3.500.000</span><span class="badge exec">Em execuÃ§Ã£o</span></div>
          <div class="trow"><span>Placas Solares em Escolas</span><span>Energia</span><span>2.100.000</span><span class="badge plan">Planejado</span></div>
          <div class="trow"><span>Sensores de Qualidade do Ar</span><span>Meio Ambiente</span><span>950.000</span><span class="badge done">ConcluÃ­do</span></div>
        </div>
      </article>
    </section>

    <section id="historico" class="historico card">
      <h2>ğŸŒ Qualidade do Ar â€” PM2.5 e PM10</h2>
      <p class="sub center">Fonte: Openâ€‘Meteo Air Quality (requisiÃ§Ã£o real). Se indisponÃ­vel, caÃ­mos para dados simulados.</p>
      <canvas id="graficoHistorico"></canvas>

      <div class="links">
        <a class="btn btn-historico-page" href="historico.html">ğŸ“ˆ Ver grÃ¡fico histÃ³rico completo</a>
        <a class="btn" href="https://openaq.org" target="_blank" rel="noopener">ğŸŒ Ver dados do OpenAQ</a>
        <a class="btn" href="https://open-meteo.com" target="_blank" rel="noopener">ğŸŒ¬ï¸ Ver API Openâ€‘Meteo</a>
      </div>
    </section>

    <section id="desafio" class="card">
      <h2>ğŸ§© Alinhamento ao Desafio (I GranDSIâ€‘BR 2016â€“2026)</h2>
      <p>Este painel aborda os temas de <strong>sistemas inteligentes</strong>, <strong>dados abertos</strong>, <strong>transparÃªncia</strong> e <strong>visÃ£o sociotÃ©cnica</strong> ao:</p>
      <ul>
        <li>Consumir <em>APIs pÃºblicas</em> (Openâ€‘Meteo e OpenAQ) para expor indicadores ambientais.</li>
        <li>Oferecer visualizaÃ§Ãµes acessÃ­veis para apoio a decisÃµes urbanas.</li>
        <li>Simular um portal de transparÃªncia de projetos sustentÃ¡veis.</li>
      </ul>
    </section>
  
    <section id="participacao" class="card wide">
      <h2>ğŸ—£ï¸ Conversa & Problemas da Cidade</h2>
      <p class="sub">Use este espaÃ§o para registrar <strong>problemas observados</strong> (ex.: buracos, iluminaÃ§Ã£o, lixo, poluiÃ§Ã£o, transporte) e sugerir soluÃ§Ãµes. As mensagens ficam salvas no seu navegador.</p>
      <form id="formConversa" class="conversa-form">
        <input type="text" id="nome" placeholder="Seu nome (opcional)" />
        <select id="tema">
          <option value="Transporte">Transporte</option>
          <option value="IluminaÃ§Ã£o">IluminaÃ§Ã£o</option>
          <option value="ResÃ­duos">ResÃ­duos</option>
          <option value="Verde/Parques">Verde/Parques</option>
          <option value="SeguranÃ§a">SeguranÃ§a</option>
          <option value="Qualidade do ar">Qualidade do ar</option>
          <option value="Outro">Outro</option>
        </select>
        <textarea id="mensagem" rows="3" placeholder="Descreva o problema e uma ideia de soluÃ§Ã£o..."></textarea>
        <button type="submit" class="btn">Enviar</button>
      </form>
      <div id="listaConversa" class="conversa-lista"></div>
    </section>

    <section id="impostos" class="card wide">
      <h2>ğŸ’° TransparÃªncia de Impostos (API) <span class="info" title="ArrecadaÃ§Ã£o municipal por mÃªs/ano. Fonte: Prefeitura de SÃ£o Paulo.">â„¹ï¸</span></h2>
      <p class="sub">ArrecadaÃ§Ã£o municipal <em>simulada via API local</em> (data/transparencia.json). Em produÃ§Ã£o, troque pelo endpoint oficial do portal da transparÃªncia da sua cidade/estado.</p>
      <div class="links">
        <a class="btn btn-historico-page" href="historico.html">ğŸ“ˆ Ver grÃ¡fico histÃ³rico completo</a>
        <a class="btn" href="https://portaldatransparencia.gov.br/" target="_blank" rel="noopener">ğŸ”— Portal da TransparÃªncia</a>
        <a class="btn" href="https://dados.gov.br/" target="_blank" rel="noopener">ğŸ—ƒï¸ Dados Abertos (Gov.br)</a>
      </div>
      <canvas id="graficoImpostos"></canvas>
<div class="sub">ğŸ“… EvoluÃ§Ã£o anual (2019â€“2024)</div>
<canvas id="graficoImpostosAnual"></canvas>
<div class="sub">ğŸ·ï¸ Breakdown por tributo (IPTU x ISS x Outros)</div>
<canvas id="graficoImpostosBreakdown"></canvas>

    </section>

    <section id="guia" class="card wide">
      <h2>ğŸ“š Guia do Site (Entenda em 1 Minuto)</h2>
      <div class="guia-grid">
        <div class="guia-card">
          <h3>ğŸŒ«ï¸ PM2.5 e PM10</h3>
          <p>Indicadores de <strong>poluiÃ§Ã£o do ar</strong>. Valores maiores indicam pior qualidade. PM2.5 (partÃ­culas finas) afeta mais a saÃºde; PM10 sÃ£o partÃ­culas maiores.</p>
        </div>
        <div class="guia-card">
          <h3>ğŸŒ¦ï¸ Clima atual</h3>
          <p>Temperatura, sensaÃ§Ã£o, umidade e vento via <strong>Openâ€‘Meteo</strong>. Influenciam no conforto tÃ©rmico e na dispersÃ£o de poluentes.</p>
        </div>
        <div class="guia-card">
          <h3>ğŸ“ˆ HistÃ³rico</h3>
          <p>EvoluÃ§Ã£o anual de PM2.5/PM10 (2019â€“2024) usando <strong>API de qualidade do ar</strong>. Ajuda a observar tendÃªncias e impacto de polÃ­ticas pÃºblicas.</p>
        </div>
        <div class="guia-card">
          <h3>ğŸ›ï¸ TransparÃªncia</h3>
          <p>GrÃ¡fico de <strong>arrecadaÃ§Ã£o de impostos</strong> para leitura rÃ¡pida do ciclo de receitas. Permite cruzar com gastos e projetos.</p>
        </div>
        <div class="guia-card">
          <h3>ğŸ—£ï¸ Conversa CidadÃ£</h3>
          <p>EspaÃ§o para <strong>relatar problemas</strong> e propor soluÃ§Ãµes. Os relatos ficam no seu navegador (localStorage) e podem ser exportados.</p>
        </div>
      </div>
    </section>

  </main>

  <footer class="foot">
    <span>Â© 2025 Cidade Inteligente 1000 â€¢ Guarulhos/SP</span>
    <span>HTML â€¢ CSS â€¢ JavaScript â€¢ Chart.js â€¢ Openâ€‘Meteo â€¢ OpenAQ</span>
  <footer class="foot">
  <span>Â© 2025 Cidade Inteligente 1000 â€¢ Guarulhos/SP</span>
  <span>HTML â€¢ CSS â€¢ JavaScript â€¢ Chart.js â€¢ Open-Meteo â€¢ OpenAQ</span>
  <a class="api-link" href="https://apilib.prefeitura.sp.gov.br/api/receita/arrecadacao" target="_blank" rel="noopener">ğŸ“ Ver dados brutos da Prefeitura (API)</a>
</footer>

  <script src="script.js"></script>
</body>
</html>
